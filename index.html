<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prices - Product Information</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            direction: rtl;
            text-align: right;
            margin: 0; 
            background-color: #f0f0f0; 
            display: flex; 
            min-height: 100vh; 
            box-sizing: border-box;
            position: relative; 
            overflow-x: hidden; 
        }

        /* Open sidebar button */
        .open-sidebar-btn {
            position: fixed; 
            top: 20px;
            right: 20px; 
            font-size: 30px;
            background: none;
            border: none;
            color: #343a40; 
            cursor: pointer;
            z-index: 1001; 
            transition: color 0.3s ease;
        }
        .open-sidebar-btn:hover {
            color: #007bff;
        }

        /* Sidebar */
        .sidebar {
            height: 100%; 
            width: 0; 
            position: fixed; 
            z-index: 1000; 
            top: 0;
            right: 0; 
            background-color: #343a40;
            overflow-x: hidden; 
            transition: 0.5s; 
            padding-top: 60px; 
            box-shadow: -2px 0 5px rgba(0,0,0,0.2);
            white-space: nowrap; 
        }

        .sidebar.active {
            width: 250px; 
        }

        .sidebar h3 {
            text-align: center;
            margin-bottom: 30px;
            color: #ffffff;
            font-size: 1.5em;
            padding: 0 20px; 
        }

        .sidebar ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .sidebar ul li {
            margin-bottom: 15px;
        }

        .sidebar ul li a {
            color: white;
            text-decoration: none;
            display: block;
            padding: 10px 20px; 
            border-radius: 5px;
            transition: background-color 0.3s ease;
            display: flex;
            align-items: center;
        }

        .sidebar ul li a:hover,
        .sidebar ul li a.active {
            background-color: #007bff; 
        }

        .sidebar ul li a i {
            margin-left: 10px; 
            font-size: 1.2em;
        }

        /* Close sidebar button */
        .closebtn {
            position: absolute;
            top: 0;
            left: 25px; 
            font-size: 36px;
            margin-left: 50px;
            color: #f1f1f1;
            text-decoration: none;
            transition: 0.3s;
        }
        .closebtn:hover {
            color: #007bff;
        }

        /* Overlay */
        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.4); 
            z-index: 999; 
            display: none; 
        }
        .overlay.active {
            display: block;
        }

        /* Main content container */
        .main-content {
            flex-grow: 1; 
            display: flex;
            justify-content: center; 
            align-items: flex-start; 
            padding: 20px; 
            box-sizing: border-box;
            transition: margin-right 0.5s ease; 
            margin-right: 0; 
        }

        /* Push content when sidebar is open */
        body.sidebar-open .main-content {
            margin-right: 250px; 
        }

        /* A4 landscape page container */
        .page-container {
            background-color: white;
            box-shadow: 0 0 10px rgba(0,0,0,0.1); 
            padding: 20mm; 
            box-sizing: border-box;
            
            max-width: 1122px; 
            flex-grow: 1; 
            min-height: 794px; 
            display: flex; 
            flex-direction: column; 
            justify-content: center; 
            align-items: center; 
            text-align: center; 
        }
        
        h2 {
            text-align: center;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        th, td {
            border: 1px solid #dddddd;
            text-align: center;
            padding: 12px;
        }
        thead {
            background-color: #f2f2f2;
        }
        tbody tr:nth-child(even) {
            background-color: #f9f9f9;
        }

        /* Highlight row on click */
        .highlight {
            background-color: #d1edda !important; /* Light green, using !important to ensure override */
            transition: background-color 0.3s ease;
        }

        /* Search and Autocomplete styles */
        .search-container {
            text-align: center;
            margin: 20px 0;
            flex-shrink: 0; 
        }
        .autocomplete {
            position: relative;
            display: inline-block;
            width: 300px; 
        }
        #searchInput {
            padding: 10px;
            width: 100%;
            border-radius: 5px;
            border: 1px solid #ddd;
            font-family: inherit;
        }
        #searchButton {
            padding: 10px 20px;
            border-radius: 5px;
            border: none;
            background-color: #007bff;
            color: white;
            cursor: pointer;
            font-family: inherit;
            vertical-align: top;
        }
        #searchButton:hover {
            background-color: #0056b3;
        }
        .autocomplete-items {
            position: absolute;
            border: 1px solid #d4d4d4;
            border-bottom: none;
            border-top: none;
            z-index: 99;
            top: 100%;
            left: 0;
            right: 0;
            background-color: #fff;
        }
        .autocomplete-items div {
            padding: 10px;
            cursor: pointer;
            background-color: #fff; 
            border-bottom: 1px solid #d4d4d4; 
        }
        .autocomplete-items div:hover {
            background-color: #e9e9e9; 
        }
        .autocomplete-active {
            background-color: DodgerBlue !important; 
            color: #ffffff; 
        }

        /* Modal styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.5);
        }
        .modal-content {
            background-color: #fefefe;
            margin: 10% auto;
            padding: 20px;
            border: 1px solid #888;
            width: 80%;
            max-width: 800px;
            border-radius: 8px;
            box-shadow: 0 4px 8px 0 rgba(0,0,0,0.2),0 6px 20px 0 rgba(0,0,0,0.19);
        }
        .close {
            color: #aaa;
            float: left;
            font-size: 28px;
            font-weight: bold;
        }
        .close:hover,
        .close:focus {
            color: black;
            text-decoration: none;
            cursor: pointer;
        }
        #modal-body table {
            width: 100%;
            margin-top: 15px;
        }

        /* Responsive styles for mobile */
        @media only screen and (max-width: 768px) {
            .open-sidebar-btn {
                font-size: 24px; 
                top: 15px;
                right: 15px;
            }
            .sidebar.active {
                width: 70vw; 
            }
            body.sidebar-open .main-content {
                margin-right: 70vw; 
            }
            .closebtn {
                font-size: 30px;
                left: 15px;
                margin-left: 0;
            }
            .main-content {
                padding: 10px; 
            }
            .page-container {
                width: 98vw; 
                height: auto; 
                min-height: auto;
                padding: 10px; 
                margin: 10px auto; 
                box-shadow: none; 
            }
            table {
                font-size: 0.7em; 
                overflow-x: auto; 
                display: block; 
                white-space: nowrap; 
            }
            th, td {
                padding: 5px; 
            }
            .autocomplete {
                width: 95%; 
            }
            h2 {
                font-size: 1em; 
            }
        }

        /* Print styles */
        @media print {
            @page {
                size: A4 landscape; 
                margin: 10mm; 
            }
            body {
                margin: 0; 
                -webkit-print-color-adjust: exact; 
                print-color-adjust: exact;
                display: block; 
                padding: 0;
                overflow-x: visible; 
            }
            .sidebar, .open-sidebar-btn, .overlay, .search-container, #searchButton, .modal {
                display: none; 
            }
            table, th, td {
                border-color: #000 !important; 
            }
            #modal-body table {
                width: 100%;
                border-collapse: collapse;
                margin-top: 0; 
            }
            .page-container {
                width: auto;
                min-height: auto;
                box-shadow: none;
                padding: 0;
                margin: 0;
            }
            .main-content {
                margin-right: 0 !important; 
                padding: 0;
            }
        }
    </style>
</head>
<body>
    
    <button class="open-sidebar-btn" id="openSidebarBtn">
        <i class="fas fa-bars"></i> 
    </button>

    
    <div class="sidebar" id="mySidebar">
        <a href="javascript:void(0)" class="closebtn" id="closeSidebarBtn">&times;</a> 
        <h3>Menu</h3>
        <ul>
            <li><a href="#" data-product="razavi"><i class="fas fa-box-open"></i> محصولات رضوی</a></li>
            <li><a href="#" data-product="gildokht"><i class="fas fa-seedling"></i> محصولات گیل‌دخت</a></li>
            <li><a href="#" data-product="khatomeh"><i class="fas fa-cookie"></i> محصولات خاتومه</a></li>
        </ul>
    </div>

    
    <div class="overlay" id="myOverlay"></div>

    
    <div class="main-content" id="mainContent">
        <div class="page-container" id="pageContainer">
            <div id="welcomeMessage">
                <h1>Welcome!</h1>
                <p style="font-size: 1.1em;">Please select a product from the menu to view the information.</p>
                <div id="shamsiDateTime" style="margin-top: 30px; font-size: 1.2em; font-weight: bold;"></div>
                <p style="margin-top: 10px; font-size: 1em; color: #555;">Made by Ali Asemani</p>
            </div>
            <div id="productSpecificContent" style="display: none;">
                </div>
        </div> 
    </div> 

    <div id="resultModal" class="modal">
      <div class="modal-content">
        <span class="close">&times;</span>
        <div id="modal-body"></div>
      </div>
    </div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Modal elements
    const modal = document.getElementById('resultModal');
    const closeModal = document.getElementsByClassName('close')[0];
    const modalBody = document.getElementById('modal-body');

    // Sidebar elements
    const openSidebarBtn = document.getElementById('openSidebarBtn');
    const closeSidebarBtn = document.getElementById('closeSidebarBtn');
    const mySidebar = document.getElementById('mySidebar');
    const myOverlay = document.getElementById('myOverlay');
    const mainContent = document.getElementById('mainContent');

    // Content areas
    const welcomeMessageDiv = document.getElementById('welcomeMessage');
    const productSpecificContentDiv = document.getElementById('productSpecificContent');
    const shamsiDateTimeDiv = document.getElementById('shamsiDateTime');

    // --- Shamsi Date and Time ---
    function getShamsiDate() {
        const now = new Date();
        const options = {
            year: 'numeric',
            month: 'long',
            day: 'numeric',
            hour: '2-digit',
            minute: '2-digit',
            second: '2-digit',
            hour12: false // Use 24-hour format
        };
        // Use 'fa-IR' locale for Persian/Shamsi date
        const shamsiDate = new Intl.DateTimeFormat('fa-IR', options).format(now);
        shamsiDateTimeDiv.textContent = shamsiDate;
    }

    // Update time every second
    setInterval(getShamsiDate, 1000);
    // Initial call
    getShamsiDate();

    // --- Product Data (simulated) ---
    const productsData = {
        razavi: `
            <div class="search-container">
                <div class="autocomplete">
                    <input type="text" id="searchInput" placeholder="بخشی از نام محصول را وارد کنید...">
                </div>
                <button id="searchButton">جستجو</button>
            </div>
            <h2>قیمت محصولات رضوی مرداد ۱۴۰۴ با احتساب ۱۰ درصد مالیات ارزش افزوده</h2>
            <table id="productTable">
                <thead>
                    <tr>
                        <th>ردیف</th>
                        <th>نام محصول</th>
                        <th>وزن گرم</th>
                        <th>نوع بسته بندی</th>
                        <th>قیمت تولید (ریال)</th>
                        <th>قیمت مصرف کننده (ریال)</th>
                        <th>پروانه ساخت</th> 
                    </tr>
                </thead>
                <tbody>
                    <tr><td>۱</td><td>پودر فلفل سیاه</td><td>۱۰۰</td><td>پت</td><td>۱,۵۲۱,۵۲۰</td><td>۱,۹۰۱,۵۶۴</td><td>۶۸۷۷/ظ/۵۰</td></tr>
                    <tr><td>۲</td><td>پودر فلفل قرمز</td><td>۱۰۰</td><td>پت</td><td>۷۵۵,۶۵۱</td><td>۹۴۴,۵۶۴</td><td>مجاز</td></tr>
                    <tr><td>۳</td><td>پودر آویشن</td><td>۵۰</td><td>پت</td><td>۱,۰۳۵,۶۵۱</td><td>۱,۲۹۴,۵۶۴</td><td>۶۹۰۹/ظ/۵۰</td></tr>
                    <tr><td>۴</td><td>پودر سماق</td><td>۱۰۰</td><td>پت</td><td>۱,۰۲۷,۶۵۱</td><td>۱,۲۸۴,۵۶۴</td><td>۶۸۴۷/ظ/۵۰</td></tr>
                    <tr><td>۵</td><td>پودر دارچین</td><td>۱۰۰</td><td>پت</td><td>۷۲۳,۶۵۱</td><td>۹۰۴,۵۶۴</td><td>۵۰/ظ/۶۸</td></tr>
                    <tr><td>۶</td><td>پودر زردچوبه</td><td>۱۰۰</td><td>پت</td><td><!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prices - Product Information</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            direction: rtl;
            text-align: right;
            margin: 0; 
            background-color: #f0f0f0; 
            display: flex; 
            min-height: 100vh; 
            box-sizing: border-box;
            position: relative; 
            overflow-x: hidden; 
        }

        /* Open sidebar button */
        .open-sidebar-btn {
            position: fixed; 
            top: 20px;
            right: 20px; 
            font-size: 30px;
            background: none;
            border: none;
            color: #343a40; 
            cursor: pointer;
            z-index: 1001; 
            transition: color 0.3s ease;
        }
        .open-sidebar-btn:hover {
            color: #007bff;
        }

        /* Sidebar */
        .sidebar {
            height: 100%; 
            width: 0; 
            position: fixed; 
            z-index: 1000; 
            top: 0;
            right: 0; 
            background-color: #343a40;
            overflow-x: hidden; 
            transition: 0.5s; 
            padding-top: 60px; 
            box-shadow: -2px 0 5px rgba(0,0,0,0.2);
            white-space: nowrap; 
        }

        .sidebar.active {
            width: 250px; 
        }

        .sidebar h3 {
            text-align: center;
            margin-bottom: 30px;
            color: #ffffff;
            font-size: 1.5em;
            padding: 0 20px; 
        }

        .sidebar ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .sidebar ul li {
            margin-bottom: 15px;
        }

        .sidebar ul li a {
            color: white;
            text-decoration: none;
            display: block;
            padding: 10px 20px; 
            border-radius: 5px;
            transition: background-color 0.3s ease;
            display: flex;
            align-items: center;
        }

        .sidebar ul li a:hover,
        .sidebar ul li a.active {
            background-color: #007bff; 
        }

        .sidebar ul li a i {
            margin-left: 10px; 
            font-size: 1.2em;
        }

        /* Close sidebar button */
        .closebtn {
            position: absolute;
            top: 0;
            left: 25px; 
            font-size: 36px;
            margin-left: 50px;
            color: #f1f1f1;
            text-decoration: none;
            transition: 0.3s;
        }
        .closebtn:hover {
            color: #007bff;
        }

        /* Overlay */
        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.4); 
            z-index: 999; 
            display: none; 
        }
        .overlay.active {
            display: block;
        }

        /* Main content container */
        .main-content {
            flex-grow: 1; 
            display: flex;
            justify-content: center; 
            align-items: flex-start; 
            padding: 20px; 
            box-sizing: border-box;
            transition: margin-right 0.5s ease; 
            margin-right: 0; 
        }

        /* Push content when sidebar is open */
        body.sidebar-open .main-content {
            margin-right: 250px; 
        }

        /* A4 landscape page container */
        .page-container {
            background-color: white;
            box-shadow: 0 0 10px rgba(0,0,0,0.1); 
            padding: 20mm; 
            box-sizing: border-box;
            
            max-width: 1122px; 
            flex-grow: 1; 
            min-height: 794px; 
            display: flex; 
            flex-direction: column; 
            justify-content: center; 
            align-items: center; 
            text-align: center; 
        }
        
        h2 {
            text-align: center;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        th, td {
            border: 1px solid #dddddd;
            text-align: center;
            padding: 12px;
        }
        thead {
            background-color: #f2f2f2;
        }
        tbody tr:nth-child(even) {
            background-color: #f9f9f9;
        }

        /* Highlight row on click */
        .highlight {
            background-color: #d1edda !important; /* Light green, using !important to ensure override */
            transition: background-color 0.3s ease;
        }

        /* Search and Autocomplete styles */
        .search-container {
            text-align: center;
            margin: 20px 0;
            flex-shrink: 0; 
        }
        .autocomplete {
            position: relative;
            display: inline-block;
            width: 300px; 
        }
        #searchInput {
            padding: 10px;
            width: 100%;
            border-radius: 5px;
            border: 1px solid #ddd;
            font-family: inherit;
        }
        #searchButton {
            padding: 10px 20px;
            border-radius: 5px;
            border: none;
            background-color: #007bff;
            color: white;
            cursor: pointer;
            font-family: inherit;
            vertical-align: top;
        }
        #searchButton:hover {
            background-color: #0056b3;
        }
        .autocomplete-items {
            position: absolute;
            border: 1px solid #d4d4d4;
            border-bottom: none;
            border-top: none;
            z-index: 99;
            top: 100%;
            left: 0;
            right: 0;
            background-color: #fff;
        }
        .autocomplete-items div {
            padding: 10px;
            cursor: pointer;
            background-color: #fff; 
            border-bottom: 1px solid #d4d4d4; 
        }
        .autocomplete-items div:hover {
            background-color: #e9e9e9; 
        }
        .autocomplete-active {
            background-color: DodgerBlue !important; 
            color: #ffffff; 
        }

        /* Modal styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.5);
        }
        .modal-content {
            background-color: #fefefe;
            margin: 10% auto;
            padding: 20px;
            border: 1px solid #888;
            width: 80%;
            max-width: 800px;
            border-radius: 8px;
            box-shadow: 0 4px 8px 0 rgba(0,0,0,0.2),0 6px 20px 0 rgba(0,0,0,0.19);
        }
        .close {
            color: #aaa;
            float: left;
            font-size: 28px;
            font-weight: bold;
        }
        .close:hover,
        .close:focus {
            color: black;
            text-decoration: none;
            cursor: pointer;
        }
        #modal-body table {
            width: 100%;
            margin-top: 15px;
        }

        /* Responsive styles for mobile */
        @media only screen and (max-width: 768px) {
            .open-sidebar-btn {
                font-size: 24px; 
                top: 15px;
                right: 15px;
            }
            .sidebar.active {
                width: 70vw; 
            }
            body.sidebar-open .main-content {
                margin-right: 70vw; 
            }
            .closebtn {
                font-size: 30px;
                left: 15px;
                margin-left: 0;
            }
            .main-content {
                padding: 10px; 
            }
            .page-container {
                width: 98vw; 
                height: auto; 
                min-height: auto;
                padding: 10px; 
                margin: 10px auto; 
                box-shadow: none; 
            }
            table {
                font-size: 0.7em; 
                overflow-x: auto; 
                display: block; 
                white-space: nowrap; 
            }
            th, td {
                padding: 5px; 
            }
            .autocomplete {
                width: 95%; 
            }
            h2 {
                font-size: 1em; 
            }
        }

        /* Print styles */
        @media print {
            @page {
                size: A4 landscape; 
                margin: 10mm; 
            }
            body {
                margin: 0; 
                -webkit-print-color-adjust: exact; 
                print-color-adjust: exact;
                display: block; 
                padding: 0;
                overflow-x: visible; 
            }
            .sidebar, .open-sidebar-btn, .overlay, .search-container, #searchButton, .modal {
                display: none; 
            }
            table, th, td {
                border-color: #000 !important; 
            }
            #modal-body table {
                width: 100%;
                border-collapse: collapse;
                margin-top: 0; 
            }
            .page-container {
                width: auto;
                min-height: auto;
                box-shadow: none;
                padding: 0;
                margin: 0;
            }
            .main-content {
                margin-right: 0 !important; 
                padding: 0;
            }
        }
    </style>
</head>
<body>
    
    <button class="open-sidebar-btn" id="openSidebarBtn">
        <i class="fas fa-bars"></i> 
    </button>

    
    <div class="sidebar" id="mySidebar">
        <a href="javascript:void(0)" class="closebtn" id="closeSidebarBtn">&times;</a> 
        <h3>Menu</h3>
        <ul>
            <li><a href="#" data-product="razavi"><i class="fas fa-box-open"></i> محصولات رضوی</a></li>
            <li><a href="#" data-product="gildokht"><i class="fas fa-seedling"></i> محصولات گیل‌دخت</a></li>
            <li><a href="#" data-product="khatomeh"><i class="fas fa-cookie"></i> محصولات خاتومه</a></li>
        </ul>
    </div>

    
    <div class="overlay" id="myOverlay"></div>

    
    <div class="main-content" id="mainContent">
        <div class="page-container" id="pageContainer">
            <div id="welcomeMessage">
                <h1>Welcome!</h1>
                <p style="font-size: 1.1em;">Please select a product from the menu to view the information.</p>
                <div id="shamsiDateTime" style="margin-top: 30px; font-size: 1.2em; font-weight: bold;"></div>
                <p style="margin-top: 10px; font-size: 1em; color: #555;">Made by Ali Asemani</p>
            </div>
            <div id="productSpecificContent" style="display: none;">
                </div>
        </div> 
    </div> 

    <div id="resultModal" class="modal">
      <div class="modal-content">
        <span class="close">&times;</span>
        <div id="modal-body"></div>
      </div>
    </div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Modal elements
    const modal = document.getElementById('resultModal');
    const closeModal = document.getElementsByClassName('close')[0];
    const modalBody = document.getElementById('modal-body');

    // Sidebar elements
    const openSidebarBtn = document.getElementById('openSidebarBtn');
    const closeSidebarBtn = document.getElementById('closeSidebarBtn');
    const mySidebar = document.getElementById('mySidebar');
    const myOverlay = document.getElementById('myOverlay');
    const mainContent = document.getElementById('mainContent');

    // Content areas
    const welcomeMessageDiv = document.getElementById('welcomeMessage');
    const productSpecificContentDiv = document.getElementById('productSpecificContent');
    const shamsiDateTimeDiv = document.getElementById('shamsiDateTime');

    // --- Shamsi Date and Time ---
    function getShamsiDate() {
        const now = new Date();
        const options = {
            year: 'numeric',
            month: 'long',
            day: 'numeric',
            hour: '2-digit',
            minute: '2-digit',
            second: '2-digit',
            hour12: false // Use 24-hour format
        };
        // Use 'fa-IR' locale for Persian/Shamsi date
        const shamsiDate = new Intl.DateTimeFormat('fa-IR', options).format(now);
        shamsiDateTimeDiv.textContent = shamsiDate;
    }

    // Update time every second
    setInterval(getShamsiDate, 1000);
    // Initial call
    getShamsiDate();

    // --- Product Data (simulated) ---
    const productsData = {
        razavi: `
            <div class="search-container">
                <div class="autocomplete">
                    <input type="text" id="searchInput" placeholder="بخشی از نام محصول را وارد کنید...">
                </div>
                <button id="searchButton">جستجو</button>
            </div>
            <h2>قیمت محصولات رضوی مرداد ۱۴۰۴ با احتساب ۱۰ درصد مالیات ارزش افزوده</h2>
            <table id="productTable">
                <thead>
                    <tr>
                        <th>ردیف</th>
                        <th>نام محصول</th>
                        <th>وزن گرم</th>
                        <th>نوع بسته بندی</th>
                        <th>قیمت تولید (ریال)</th>
                        <th>قیمت مصرف کننده (ریال)</th>
                        <th>پروانه ساخت</th> 
                    </tr>
                </thead>
                <tbody>
                    <tr><td>۱</td><td>پودر فلفل سیاه</td><td>۱۰۰</td><td>پت</td><td>۱,۵۲۱,۵۲۰</td><td>۱,۹۰۱,۵۶۴</td><td>۶۸۷۷/ظ/۵۰</td></tr>
                    <tr><td>۲</td><td>پودر فلفل قرمز</td><td>۱۰۰</td><td>پت</td><td>۷۵۵,۶۵۱</td><td>۹۴۴,۵۶۴</td><td>مجاز</td></tr>
                    <tr><td>۳</td><td>پودر آویشن</td><td>۵۰</td><td>پت</td><td>۱,۰۳۵,۶۵۱</td><td>۱,۲۹۴,۵۶۴</td><td>۶۹۰۹/ظ/۵۰</td></tr>
                    <tr><td>۴</td><td>پودر سماق</td><td>۱۰۰</td><td>پت</td><td>۱,۰۲۷,۶۵۱</td><td>۱,۲۸۴,۵۶۴</td><td>۶۸۴۷/ظ/۵۰</td></tr>
                    <tr><td>۵</td><td>پودر دارچین</td><td>۱۰۰</td><td>پت</td><td>۷۲۳,۶۵۱</td><td>۹۰۴,۵۶۴</td><td>۵۰/ظ/۶۸</td></tr>
                    <tr><td>۶</td><td>پودر زردچوبه</td><td>۱۰۰</td><td>پت</td><td>٦٤٣,٦٥١</td><td>٨٠٤,٥٦٤</td><td>مجاز</td></tr>
                    <tr><td>۷</td><td>پودر کاری</td><td>۱۰۰</td><td>پت</td><td>۷۹۵,۶۵۱</td><td>۹۹۴,۵۶۴</td><td>مجاز</td></tr>
                    <tr><td>۸</td><td>پودر زنجبیل</td><td>۱۰۰</td><td>پت</td><td>۹۴۷,۶۵۱</td><td>۱,۱۸۴,۵۶۴</td><td>۶۸۷۶/ظ/۵۰</td></tr>
                    <tr><td>۹</td><td>پودر سیر</td><td>۱۰۰</td><td>پت</td><td>۸۹۹,۶۵۱</td><td>۱,۱۲۴,۵۶۴</td><td>مجاز</td></tr>
                </tbody>
            </table>
        `,
        gildokht: `
            <div class="search-container">
                <div class="autocomplete">
                    <input type="text" id="searchInput" placeholder="بخشی از نام محصول را وارد کنید...">
                </div>
                <button id="searchButton">جستجو</button>
            </div>
            <h2>لیست قیمت محصولات گیل دخت خرداد ۱۴۰۴ با احتساب ۱۰ درصد مالیات ارزش افزوده</h2>
            <table id="productTable">
                <thead>
                    <tr>
                        <th>ردیف</th>
                        <th>نام محصول</th>
                        <th>نوع بسته بندی</th>
                        <th>وزن</th>
                        <th>قیمت تولید</th>
                        <th>قیمت مصرف کننده</th>
                        <th>پروانه ساخت</th>
                    </tr>
                </thead>
                <tbody>
                    <tr><td>۱</td><td>پودر فلفل سیاه</td><td>پت</td><td>۹۰ گرم</td><td>۱,۴۸۸,۷۲۰</td><td>۱,۸۶۰,۹۰۰</td><td>۵۰/۲۴۱۷۳</td></tr>
                    <tr><td>۲</td><td>پودر فلفل قرمز</td><td>پت</td><td>۹۰ گرم</td><td>۷۲۹,۵۲۰</td><td>۹۱۱,۹۰۰</td><td>۵۰/۲۴۲۷۲</td></tr>
                    <tr><td>۳</td><td>آویشن</td><td>پت</td><td>۵۰ گرم</td><td>۶۵۹,۱۲۰</td><td>۸۲۳,۹۰۰</td><td>۵۰/۲۴۱۰۳</td></tr>
                    <tr><td>۴</td><td>پودر سماق</td><td>پت</td><td>۹۰ گرم</td><td>۷۷۳,۵۲۰</td><td>۹۶۶,۹۰۰</td><td>۵۰/۲۴۱۰۴</td></tr>
                    <tr><td>۵</td><td>پودر دارچین</td><td>پت</td><td>۹۰ گرم</td><td>۷۶۴,۷۲۰</td><td>۹۵۵,۹۰۰</td><td>۵۰/۲۴۱۰۸</td></tr>
                    <tr><td>۶</td><td>زرد چوبه</td><td>پت</td><td>۹۰ گرم</td><td>۶۲۳,۹۲۰</td><td>۷۹۹,۹۰۰</td><td>۵۰/۲۴۱۰۶</td></tr>
                    <tr><td>۷</td><td>پودر کاری</td><td>پت</td><td>۹۰ گرم</td><td>۸۱۷,۵۲۰</td><td>۱,۰۲۱,۹۰۰</td><td>۵۰/۲۴۲۷۳</td></tr>
                    <tr><td>۸</td><td>زنجبیل</td><td>پت</td><td>۹۰ گرم</td><td>۹۴۰،۷۲۰</td><td>۱,۱۷۵,۹۰۰</td><td>۵۰/۲۴۱۰۹</td></tr>
                    <tr><td>۹</td><td>پودر سیر</td><td>پت</td><td>۱۰۰ گرم</td><td>۹۹۳,۵۲۰</td><td>۱,۲۴۱,۹۰۰</td><td>۵۰/۲۴۱۱۰</td></tr>
                    <tr><td>۱۰</td><td>شکر</td><td>۹۰۰ گرم</td><td>۹۰۰ گرم</td><td>۸۰۱,۰۰۰</td><td>۸۹۰,۰۰۰</td><td>۵۰/۳۰۵۲۰</td></tr>
                </tbody>
            </table>
        `,
        khatomeh: `
            <div class="search-container">
                <div class="autocomplete">
                    <input type="text" id="searchInput" placeholder="بخشی از نام محصول را وارد کنید...">
                </div>
                <button id="searchButton">جستجو</button>
            </div>
            <h2>لیست قیمت محصولات خاتومه (لطفاً ستون‌های خالی را تکمیل کنید)</h2>
            <table id="productTable">
                <thead>
                    <tr>
                        <th>ردیف</th>
                        <th>نام محصول</th>
                        <th>وزن گرم</th>
                        <th>نوع بسته بندی</th>
                        <th>قیمت تولید (ریال)</th>
                        <th>قیمت مصرف کننده (ریال)</th>
                        <th>پروانه ساخت</th> 
                    </tr>
                </thead>
                <tbody>
                    <tr><td>۱</td><td>پودر زردچوبه</td><td>۱۰۰</td><td>قوطی</td><td>-</td><td>-</td><td>---</td></tr>
                    <tr><td>۲</td><td>پودر سیر</td><td>۱۰۰</td><td>قوطی</td><td>-</td><td>-</td><td>---</td></tr>
                    <tr><td>۳</td><td>پودر فلفل قرمز</td><td>۱۰۰</td><td>قوطی</td><td>-</td><td>-</td><td>---</td></tr>
                    <tr><td>۴</td><td>پودر سماق</td><td>۱۰۰</td><td>قوطی</td><td>-</td><td>-</td><td>---</td></tr>
                    <tr><td>۵</td><td>پودر دارچین</td><td>۱۰۰</td><td>قوطی</td><td>-</td><td>-</td><td>---</td></tr>
                    <tr><td>۶</td><td>پودر ادویه کاری</td><td>۱۰۰</td><td>قوطی</td><td>-</td><td>-</td><td>---</td></tr>
                    <tr><td>۷</td><td>پودر آویشن</td><td>۶۰</td><td>قوطی</td><td>-</td><td>-</td><td>---</td></tr>
                    <tr><td>۸</td><td>پودر زنجبیل</td><td>۱۰۰</td><td>قوطی</td><td>-</td><td>-</td><td>---</td></tr>
                    <tr><td>۹</td><td>پودر فلفل سیاه</td><td>۱۰۰</td><td>قوطی</td><td>-</td><td>-</td><td>---</td></tr>
                    <tr><td>۱۰</td><td>پودر سیر</td><td>۱۲۰</td><td>قوطی</td><td>-</td><td>-</td><td>---</td></tr>
                    <tr><td>۱۱</td><td>پودر سیر</td><td>۷۵</td><td>سلفون</td><td>-</td><td>-</td><td>---</td></tr>
                    <tr><td>۱۲</td><td>پودر دارچین</td><td>۷۵</td><td>سلفون</td><td>-</td><td>-</td><td>---</td></tr>
                    <tr><td>۱۳</td><td>پودر فلفل قرمز</td><td>۷۵</td><td>سلفون</td><td>-</td><td>-</td><td>---</td></tr>
                    <tr><td>۱۴</td><td>پودر ادویه کاری</td><td>۷۵</td><td>سلفون</td><td>-</td><td>-</td><td>---</td></tr>
                    <tr><td>۱۵</td><td>پودر سیر</td><td>۵۰</td><td>سلفون</td><td>-</td><td>-</td><td>---</td></tr>
                    <tr><td>۱۶</td><td>پودر سماق</td><td>۵۰</td><td>سلفون</td><td>-</td><td>-</td><td>---</td></tr>
                    <tr><td>۱۷</td><td>پودر دارچین</td><td>۵۰</td><td>سلفون</td><td>-</td><td>-</td><td>---</td></tr>
                    <tr><td>۱۸</td><td>پودر فلفل قرمز</td><td>۵۰</td><td>سلفون</td><td>-</td><td>-</td><td>---</td></tr>
                    <tr><td>۱۹</td><td>پودر ادویه کاری</td><td>۵۰</td><td>سلفون</td><td>-</td><td>-</td><td>---</td></tr>
                    <tr><td>۲۰</td><td>پودر آویشن</td><td>۳۰</td><td>سلفون</td><td>-</td><td>-</td><td>---</td></tr>
                </tbody>
            </table>
        `
    };

    function loadProductContent(productKey) {
        welcomeMessageDiv.style.display = 'none'; // Hide welcome message
        productSpecificContentDiv.innerHTML = productsData[productKey]; // Load content
        productSpecificContentDiv.style.display = 'block'; // Show product content

        // Re-initialize search and autocomplete for the newly loaded content
        const newSearchInput = document.getElementById('searchInput');
        const newSearchButton = document.getElementById('searchButton');
        const newProductTable = document.querySelector('#productSpecificContent #productTable'); // Get the table itself
        
        // Only run search/autocomplete setup if a table is present for the loaded content
        if (newProductTable) {
            const newMainTableBody = newProductTable.querySelector('tbody');
            if (newSearchInput && newSearchButton && newMainTableBody) {
                const productRows = Array.from(newMainTableBody.getElementsByTagName('tr'));
                const productNames = productRows.map(row => row.getElementsByTagName('td')[1].textContent.trim());

                // Attach event listeners to the new elements
                newSearchButton.onclick = () => performSearch(newSearchInput, newMainTableBody);
                newSearchInput.addEventListener('keyup', (event) => {
                    if (event.key === 'Enter') {
                        performSearch(newSearchInput, newMainTableBody);
                    }
                });
                autocomplete(newSearchInput, productNames);
            }

            // Add click event listener to table rows for highlighting
            const rows = newProductTable.querySelectorAll('tbody tr');
            rows.forEach(row => {
                row.addEventListener('click', function() {
                    // Remove highlight from all other rows in this table
                    rows.forEach(r => r.classList.remove('highlight'));
                    // Add highlight to the clicked row
                    this.classList.add('highlight');
                });
            });
        }
        closeNav(); // Close sidebar after selection
    }

    // Function to perform search (now takes input and tbody elements)
    const performSearch = (inputElem, tableBodyElem) => {
        const query = inputElem.value.trim().toLowerCase();
        if (!query) {
            alert("لطفاً نام محصولی را برای جستجو وارد کنید.");
            return;
        }

        let resultFound = false;
        modalBody.innerHTML = '';

        const resultTable = document.createElement('table');
        // Clone header from the product table that is currently displayed
        const currentProductTable = document.querySelector('#productSpecificContent #productTable');
        const tableHeader = currentProductTable ? currentProductTable.querySelector('thead').cloneNode(true) : null;
        if (tableHeader) resultTable.appendChild(tableHeader);
        
        const resultTbody = document.createElement('tbody');
        resultTable.appendChild(resultTbody);
        
        // Use the rows from the provided tableBodyElem
        const productRows = Array.from(tableBodyElem.getElementsByTagName('tr'));

        productRows.forEach(row => {
            const productName = row.getElementsByTagName('td')[1].textContent.toLowerCase();
            if (productName.includes(query)) {
                const clonedRow = row.cloneNode(true);
                resultTbody.appendChild(clonedRow);
                resultFound = true;
            }
        });

        if (resultFound) {
            modalBody.appendChild(resultTable);
        } else {
            modalBody.innerHTML = '<p style="text-align:center; font-weight: bold;">محصولی با این مشخصات یافت نشد.</p>';
        }
        
        modal.style.display = 'block';

        // Add highlight logic to rows in the modal too
        const modalRows = modalBody.querySelectorAll('tbody tr');
        modalRows.forEach(row => {
            row.addEventListener('click', function() {
                modalRows.forEach(r => r.classList.remove('highlight'));
                this.classList.add('highlight');
            });
        });
    };

    // Modal close handlers
    closeModal.onclick = function() {
        modal.style.display = 'none';
    }

    window.onclick = function(event) {
        if (event.target == modal) {
            modal.style.display = 'none';
        }
    }

    // Autocomplete logic (unchanged, just needs to be called on new searchInput)
    function autocomplete(inp, arr) {
        let currentFocus;
        inp.addEventListener("input", function(e) {
            let a, b, i, val = this.value;
            closeAllLists();
            if (!val) { return false; }
            currentFocus = -1;
            a = document.createElement("DIV");
            a.setAttribute("id", this.id + "autocomplete-list");
            a.setAttribute("class", "autocomplete-items");
            this.parentNode.appendChild(a);

            for (i = 0; i < arr.length; i++) {
                if (arr[i].toLowerCase().includes(val.toLowerCase())) {
                    b = document.createElement("DIV");
                    const regex = new RegExp(val, 'gi');
                    b.innerHTML = arr[i].replace(regex, (match) => `<strong>${match}</strong>`);
                    b.innerHTML += "<input type='hidden' value='" + arr[i] + "'>";
                    b.addEventListener("click", function(e) {
                        inp.value = this.getElementsByTagName("input")[0].value;
                        closeAllLists();
                    });
                    a.appendChild(b);
                }
            }
        });

        inp.addEventListener("keydown", function(e) {
            let x = document.getElementById(this.id + "autocomplete-list");
            if (x) x = x.getElementsByTagName("div");
            if (e.keyCode == 40) { // Arrow DOWN
                currentFocus++;
                addActive(x);
            } else if (e.keyCode == 38) { // Arrow UP
                currentFocus--;
                addActive(x);
            } else if (e.keyCode == 13) { // Enter
                e.preventDefault();
                if (currentFocus > -1) {
                    if (x) x[currentFocus].click();
                }
            }
        });

        function addActive(x) {
            if (!x) return false;
            removeActive(x);
            if (currentFocus >= x.length) currentFocus = 0;
            if (currentFocus < 0) currentFocus = (x.length - 1);
            x[currentFocus].classList.add("autocomplete-active");
        }

        function removeActive(x) {
            for (let i = 0; i < x.length; i++) {
                x[i].classList.remove("autocomplete-active");
            }
        }

        function closeAllLists(elmnt) {
            const x = document.getElementsByClassName("autocomplete-items");
            for (let i = 0; i < x.length; i++) {
                if (elmnt != x[i] && elmnt != inp) {
                    x[i].parentNode.removeChild(x[i]);
                }
            }
        }

        document.addEventListener("click", function (e) {
            closeAllLists(e.target);
        });
    }

    // --- Sidebar Open/Close Logic ---
    function openNav() {
        mySidebar.classList.add('active'); // Use class for active state
        myOverlay.classList.add('active');
        document.body.classList.add('sidebar-open');
        
        // Handle width based on screen size
        if (window.innerWidth <= 768) {
            mySidebar.style.width = "70vw";
            document.body.classList.add('sidebar-open-mobile');
            document.body.classList.remove('sidebar-open'); // Remove desktop specific class
        } else {
            mySidebar.style.width = "250px";
            document.body.classList.remove('sidebar-open-mobile'); // Remove mobile specific class
            document.body.classList.add('sidebar-open'); // Add desktop specific class
        }
    }

    function closeNav() {
        mySidebar.classList.remove('active');
        mySidebar.style.width = "0"; // Explicitly set width to 0
        myOverlay.classList.remove('active');
        document.body.classList.remove('sidebar-open');
        document.body.classList.remove('sidebar-open-mobile');
    }

    openSidebarBtn.onclick = openNav;
    closeSidebarBtn.onclick = closeNav;
    myOverlay.onclick = closeNav;

    // --- Sidebar Link Click Handlers ---
    const sidebarLinks = document.querySelectorAll('.sidebar ul li a');
    sidebarLinks.forEach(link => {
        link.addEventListener('click', function(event) {
            event.preventDefault(); // Prevent default link behavior
            
            // Remove active class from all links
            sidebarLinks.forEach(item => item.classList.remove('active'));
            // Add active class to clicked link
            this.classList.add('active');

            const productType = this.dataset.product; // Get data-product attribute
            loadProductContent(productType);
        });
    });

    // Handle window resize for sidebar
    window.addEventListener('resize', () => {
        if (mySidebar.classList.contains('active')) {
            if (window.innerWidth <= 768) {
                mySidebar.style.width = "70vw";
                document.body.classList.add('sidebar-open-mobile');
                document.body.classList.remove('sidebar-open');
            } else {
                mySidebar.style.width = "250px";
                document.body.classList.remove('sidebar-open-mobile');
                document.body.classList.add('sidebar-open');
            }
        }
    });

    // Initial state: Only welcome message and date/time are visible.
    // No product content is loaded until a sidebar link is clicked.
});
</script>

</body>
</html>
</td><td>۹۰۴,۵۶۴</td><td>مجاز</td></tr>
                    <tr><td>۷</td><td>پودر کاری</td><td>۱۰۰</td><td>پت</td><td>۷۹۵,۶۵۱</td><td>۹۹۴,۵۶۴</td><td>مجاز</td></tr>
                    <tr><td>۸</td><td>پودر زنجبیل</td><td>۱۰۰</td><td>پت</td><td>۹۴۷,۶۵۱</td><td>۱,۱۸۴,۵۶۴</td><td>۶۸۷۶/ظ/۵۰</td></tr>
                    <tr><td>۹</td><td>پودر سیر</td><td>۱۰۰</td><td>پت</td><td>۸۹۹,۶۵۱</td><td>۱,۱۲۴,۵۶۴</td><td>مجاز</td></tr>
                </tbody>
            </table>
        `,
        gildokht: `
            <div class="search-container">
                <div class="autocomplete">
                    <input type="text" id="searchInput" placeholder="بخشی از نام محصول را وارد کنید...">
                </div>
                <button id="searchButton">جستجو</button>
            </div>
            <h2>لیست قیمت محصولات گیل دخت خرداد ۱۴۰۴ با احتساب ۱۰ درصد مالیات ارزش افزوده</h2>
            <table id="productTable">
                <thead>
                    <tr>
                        <th>ردیف</th>
                        <th>نام محصول</th>
                        <th>نوع بسته بندی</th>
                        <th>وزن</th>
                        <th>قیمت تولید</th>
                        <th>قیمت مصرف کننده</th>
                        <th>پروانه ساخت</th>
                    </tr>
                </thead>
                <tbody>
                    <tr><td>۱</td><td>پودر فلفل سیاه</td><td>پت</td><td>۹۰ گرم</td><td>۱,۴۸۸,۷۲۰</td><td>۱,۸۶۰,۹۰۰</td><td>۵۰/۲۴۱۷۳</td></tr>
                    <tr><td>۲</td><td>پودر فلفل قرمز</td><td>پت</td><td>۹۰ گرم</td><td>۷۲۹,۵۲۰</td><td>۹۱۱,۹۰۰</td><td>۵۰/۲۴۲۷۲</td></tr>
                    <tr><td>۳</td><td>آویشن</td><td>پت</td><td>۵۰ گرم</td><td>۶۵۹,۱۲۰</td><td>۸۲۳,۹۰۰</td><td>۵۰/۲۴۱۰۳</td></tr>
                    <tr><td>۴</td><td>پودر سماق</td><td>پت</td><td>۹۰ گرم</td><td>۷۷۳,۵۲۰</td><td>۹۶۶,۹۰۰</td><td>۵۰/۲۴۱۰۴</td></tr>
                    <tr><td>۵</td><td>پودر دارچین</td><td>پت</td><td>۹۰ گرم</td><td>۷۶۴,۷۲۰</td><td>۹۵۵,۹۰۰</td><td>۵۰/۲۴۱۰۸</td></tr>
                    <tr><td>۶</td><td>زرد چوبه</td><td>پت</td><td>۹۰ گرم</td><td>۶۲۳,۹۲۰</td><td>۷۹۹,۹۰۰</td><td>۵۰/۲۴۱۰۶</td></tr>
                    <tr><td>۷</td><td>پودر کاری</td><td>پت</td><td>۹۰ گرم</td><td>۸۱۷,۵۲۰</td><td>۱,۰۲۱,۹۰۰</td><td>۵۰/۲۴۲۷۳</td></tr>
                    <tr><td>۸</td><td>زنجبیل</td><td>پت</td><td>۹۰ گرم</td><td>۹۴۰،۷۲۰</td><td>۱,۱۷۵,۹۰۰</td><td>۵۰/۲۴۱۰۹</td></tr>
                    <tr><td>۹</td><td>پودر سیر</td><td>پت</td><td>۱۰۰ گرم</td><td>۹۹۳,۵۲۰</td><td>۱,۲۴۱,۹۰۰</td><td>۵۰/۲۴۱۱۰</td></tr>
                    <tr><td>۱۰</td><td>شکر</td><td>۹۰۰ گرم</td><td>۹۰۰ گرم</td><td>۸۰۱,۰۰۰</td><td>۸۹۰,۰۰۰</td><td>۵۰/۳۰۵۲۰</td></tr>
                </tbody>
            </table>
        `,
        khatomeh: `
            <div class="search-container">
                <div class="autocomplete">
                    <input type="text" id="searchInput" placeholder="بخشی از نام محصول را وارد کنید...">
                </div>
                <button id="searchButton">جستجو</button>
            </div>
            <h2>لیست قیمت محصولات خاتومه (لطفاً ستون‌های خالی را تکمیل کنید)</h2>
            <table id="productTable">
                <thead>
                    <tr>
                        <th>ردیف</th>
                        <th>نام محصول</th>
                        <th>وزن گرم</th>
                        <th>نوع بسته بندی</th>
                        <th>قیمت تولید (ریال)</th>
                        <th>قیمت مصرف کننده (ریال)</th>
                        <th>پروانه ساخت</th> 
                    </tr>
                </thead>
                <tbody>
                    <tr><td>۱</td><td>پودر زردچوبه</td><td>۱۰۰</td><td>قوطی</td><td>-</td><td>-</td><td>---</td></tr>
                    <tr><td>۲</td><td>پودر سیر</td><td>۱۰۰</td><td>قوطی</td><td>-</td><td>-</td><td>---</td></tr>
                    <tr><td>۳</td><td>پودر فلفل قرمز</td><td>۱۰۰</td><td>قوطی</td><td>-</td><td>-</td><td>---</td></tr>
                    <tr><td>۴</td><td>پودر سماق</td><td>۱۰۰</td><td>قوطی</td><td>-</td><td>-</td><td>---</td></tr>
                    <tr><td>۵</td><td>پودر دارچین</td><td>۱۰۰</td><td>قوطی</td><td>-</td><td>-</td><td>---</td></tr>
                    <tr><td>۶</td><td>پودر ادویه کاری</td><td>۱۰۰</td><td>قوطی</td><td>-</td><td>-</td><td>---</td></tr>
                    <tr><td>۷</td><td>پودر آویشن</td><td>۶۰</td><td>قوطی</td><td>-</td><td>-</td><td>---</td></tr>
                    <tr><td>۸</td><td>پودر زنجبیل</td><td>۱۰۰</td><td>قوطی</td><td>-</td><td>-</td><td>---</td></tr>
                    <tr><td>۹</td><td>پودر فلفل سیاه</td><td>۱۰۰</td><td>قوطی</td><td>-</td><td>-</td><td>---</td></tr>
                    <tr><td>۱۰</td><td>پودر سیر</td><td>۱۲۰</td><td>قوطی</td><td>-</td><td>-</td><td>---</td></tr>
                    <tr><td>۱۱</td><td>پودر سیر</td><td>۷۵</td><td>سلفون</td><td>-</td><td>-</td><td>---</td></tr>
                    <tr><td>۱۲</td><td>پودر دارچین</td><td>۷۵</td><td>سلفون</td><td>-</td><td>-</td><td>---</td></tr>
                    <tr><td>۱۳</td><td>پودر فلفل قرمز</td><td>۷۵</td><td>سلفون</td><td>-</td><td>-</td><td>---</td></tr>
                    <tr><td>۱۴</td><td>پودر ادویه کاری</td><td>۷۵</td><td>سلفون</td><td>-</td><td>-</td><td>---</td></tr>
                    <tr><td>۱۵</td><td>پودر سیر</td><td>۵۰</td><td>سلفون</td><td>-</td><td>-</td><td>---</td></tr>
                    <tr><td>۱۶</td><td>پودر سماق</td><td>۵۰</td><td>سلفون</td><td>-</td><td>-</td><td>---</td></tr>
                    <tr><td>۱۷</td><td>پودر دارچین</td><td>۵۰</td><td>سلفون</td><td>-</td><td>-</td><td>---</td></tr>
                    <tr><td>۱۸</td><td>پودر فلفل قرمز</td><td>۵۰</td><td>سلفون</td><td>-</td><td>-</td><td>---</td></tr>
                    <tr><td>۱۹</td><td>پودر ادویه کاری</td><td>۵۰</td><td>سلفون</td><td>-</td><td>-</td><td>---</td></tr>
                    <tr><td>۲۰</td><td>پودر آویشن</td><td>۳۰</td><td>سلفون</td><td>-</td><td>-</td><td>---</td></tr>
                </tbody>
            </table>
        `
    };

    function loadProductContent(productKey) {
        welcomeMessageDiv.style.display = 'none'; // Hide welcome message
        productSpecificContentDiv.innerHTML = productsData[productKey]; // Load content
        productSpecificContentDiv.style.display = 'block'; // Show product content

        // Re-initialize search and autocomplete for the newly loaded content
        const newSearchInput = document.getElementById('searchInput');
        const newSearchButton = document.getElementById('searchButton');
        const newProductTable = document.querySelector('#productSpecificContent #productTable'); // Get the table itself
        
        // Only run search/autocomplete setup if a table is present for the loaded content
        if (newProductTable) {
            const newMainTableBody = newProductTable.querySelector('tbody');
            if (newSearchInput && newSearchButton && newMainTableBody) {
                const productRows = Array.from(newMainTableBody.getElementsByTagName('tr'));
                const productNames = productRows.map(row => row.getElementsByTagName('td')[1].textContent.trim());

                // Attach event listeners to the new elements
                newSearchButton.onclick = () => performSearch(newSearchInput, newMainTableBody);
                newSearchInput.addEventListener('keyup', (event) => {
                    if (event.key === 'Enter') {
                        performSearch(newSearchInput, newMainTableBody);
                    }
                });
                autocomplete(newSearchInput, productNames);
            }

            // Add click event listener to table rows for highlighting
            const rows = newProductTable.querySelectorAll('tbody tr');
            rows.forEach(row => {
                row.addEventListener('click', function() {
                    // Remove highlight from all other rows in this table
                    rows.forEach(r => r.classList.remove('highlight'));
                    // Add highlight to the clicked row
                    this.classList.add('highlight');
                });
            });
        }
        closeNav(); // Close sidebar after selection
    }

    // Function to perform search (now takes input and tbody elements)
    const performSearch = (inputElem, tableBodyElem) => {
        const query = inputElem.value.trim().toLowerCase();
        if (!query) {
            alert("لطفاً نام محصولی را برای جستجو وارد کنید.");
            return;
        }

        let resultFound = false;
        modalBody.innerHTML = '';

        const resultTable = document.createElement('table');
        // Clone header from the product table that is currently displayed
        const currentProductTable = document.querySelector('#productSpecificContent #productTable');
        const tableHeader = currentProductTable ? currentProductTable.querySelector('thead').cloneNode(true) : null;
        if (tableHeader) resultTable.appendChild(tableHeader);
        
        const resultTbody = document.createElement('tbody');
        resultTable.appendChild(resultTbody);
        
        // Use the rows from the provided tableBodyElem
        const productRows = Array.from(tableBodyElem.getElementsByTagName('tr'));

        productRows.forEach(row => {
            const productName = row.getElementsByTagName('td')[1].textContent.toLowerCase();
            if (productName.includes(query)) {
                const clonedRow = row.cloneNode(true);
                resultTbody.appendChild(clonedRow);
                resultFound = true;
            }
        });

        if (resultFound) {
            modalBody.appendChild(resultTable);
        } else {
            modalBody.innerHTML = '<p style="text-align:center; font-weight: bold;">محصولی با این مشخصات یافت نشد.</p>';
        }
        
        modal.style.display = 'block';

        // Add highlight logic to rows in the modal too
        const modalRows = modalBody.querySelectorAll('tbody tr');
        modalRows.forEach(row => {
            row.addEventListener('click', function() {
                modalRows.forEach(r => r.classList.remove('highlight'));
                this.classList.add('highlight');
            });
        });
    };

    // Modal close handlers
    closeModal.onclick = function() {
        modal.style.display = 'none';
    }

    window.onclick = function(event) {
        if (event.target == modal) {
            modal.style.display = 'none';
        }
    }

    // Autocomplete logic (unchanged, just needs to be called on new searchInput)
    function autocomplete(inp, arr) {
        let currentFocus;
        inp.addEventListener("input", function(e) {
            let a, b, i, val = this.value;
            closeAllLists();
            if (!val) { return false; }
            currentFocus = -1;
            a = document.createElement("DIV");
            a.setAttribute("id", this.id + "autocomplete-list");
            a.setAttribute("class", "autocomplete-items");
            this.parentNode.appendChild(a);

            for (i = 0; i < arr.length; i++) {
                if (arr[i].toLowerCase().includes(val.toLowerCase())) {
                    b = document.createElement("DIV");
                    const regex = new RegExp(val, 'gi');
                    b.innerHTML = arr[i].replace(regex, (match) => `<strong>${match}</strong>`);
                    b.innerHTML += "<input type='hidden' value='" + arr[i] + "'>";
                    b.addEventListener("click", function(e) {
                        inp.value = this.getElementsByTagName("input")[0].value;
                        closeAllLists();
                    });
                    a.appendChild(b);
                }
            }
        });

        inp.addEventListener("keydown", function(e) {
            let x = document.getElementById(this.id + "autocomplete-list");
            if (x) x = x.getElementsByTagName("div");
            if (e.keyCode == 40) { // Arrow DOWN
                currentFocus++;
                addActive(x);
            } else if (e.keyCode == 38) { // Arrow UP
                currentFocus--;
                addActive(x);
            } else if (e.keyCode == 13) { // Enter
                e.preventDefault();
                if (currentFocus > -1) {
                    if (x) x[currentFocus].click();
                }
            }
        });

        function addActive(x) {
            if (!x) return false;
            removeActive(x);
            if (currentFocus >= x.length) currentFocus = 0;
            if (currentFocus < 0) currentFocus = (x.length - 1);
            x[currentFocus].classList.add("autocomplete-active");
        }

        function removeActive(x) {
            for (let i = 0; i < x.length; i++) {
                x[i].classList.remove("autocomplete-active");
            }
        }

        function closeAllLists(elmnt) {
            const x = document.getElementsByClassName("autocomplete-items");
            for (let i = 0; i < x.length; i++) {
                if (elmnt != x[i] && elmnt != inp) {
                    x[i].parentNode.removeChild(x[i]);
                }
            }
        }

        document.addEventListener("click", function (e) {
            closeAllLists(e.target);
        });
    }

    // --- Sidebar Open/Close Logic ---
    function openNav() {
        mySidebar.classList.add('active'); // Use class for active state
        myOverlay.classList.add('active');
        document.body.classList.add('sidebar-open');
        
        // Handle width based on screen size
        if (window.innerWidth <= 768) {
            mySidebar.style.width = "70vw";
            document.body.classList.add('sidebar-open-mobile');
            document.body.classList.remove('sidebar-open'); // Remove desktop specific class
        } else {
            mySidebar.style.width = "250px";
            document.body.classList.remove('sidebar-open-mobile'); // Remove mobile specific class
            document.body.classList.add('sidebar-open'); // Add desktop specific class
        }
    }

    function closeNav() {
        mySidebar.classList.remove('active');
        mySidebar.style.width = "0"; // Explicitly set width to 0
        myOverlay.classList.remove('active');
        document.body.classList.remove('sidebar-open');
        document.body.classList.remove('sidebar-open-mobile');
    }

    openSidebarBtn.onclick = openNav;
    closeSidebarBtn.onclick = closeNav;
    myOverlay.onclick = closeNav;

    // --- Sidebar Link Click Handlers ---
    const sidebarLinks = document.querySelectorAll('.sidebar ul li a');
    sidebarLinks.forEach(link => {
        link.addEventListener('click', function(event) {
            event.preventDefault(); // Prevent default link behavior
            
            // Remove active class from all links
            sidebarLinks.forEach(item => item.classList.remove('active'));
            // Add active class to clicked link
            this.classList.add('active');

            const productType = this.dataset.product; // Get data-product attribute
            loadProductContent(productType);
        });
    });

    // Handle window resize for sidebar
    window.addEventListener('resize', () => {
        if (mySidebar.classList.contains('active')) {
            if (window.innerWidth <= 768) {
                mySidebar.style.width = "70vw";
                document.body.classList.add('sidebar-open-mobile');
                document.body.classList.remove('sidebar-open');
            } else {
                mySidebar.style.width = "250px";
                document.body.classList.remove('sidebar-open-mobile');
                document.body.classList.add('sidebar-open');
            }
        }
    });

    // Initial state: Only welcome message and date/time are visible.
    // No product content is loaded until a sidebar link is clicked.
});
</script>

</body>
</html>
